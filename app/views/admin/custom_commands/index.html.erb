<div class="p-6 bg-slate-900 min-h-screen text-slate-200">
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
    <div>
      <h1 class="text-3xl font-bold text-white tracking-tight">Command Management</h1>
      <p class="text-slate-400 text-sm mt-1">Configure automated bot responses and access levels.</p>
    </div>
    <%= link_to new_admin_custom_command_path, class: "inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-semibold rounded shadow-sm transition-all" do %>
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
      Add New Command
    <% end %>
  </div>

  <div class="bg-slate-800 border border-slate-700 rounded-lg overflow-hidden shadow-xl">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="bg-slate-700/50 border-b border-slate-700">
          <th class="px-6 py-4 text-xs font-bold uppercase tracking-wider text-slate-400">Trigger</th>
          <th class="px-6 py-4 text-xs font-bold uppercase tracking-wider text-slate-400">Response Pattern</th>
          <th class="px-6 py-4 text-xs font-bold uppercase tracking-wider text-slate-400 text-center">Security</th>
          <th class="px-6 py-4 text-xs font-bold uppercase tracking-wider text-slate-400">Registry Info</th>
          <th class="px-6 py-4 text-xs font-bold uppercase tracking-wider text-slate-400 text-right">Operations</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-700">
        <% @custom_commands.each do |command| %>
          <tr class="hover:bg-slate-700/30 transition-colors">
            <td class="px-6 py-4">
              <code class="px-2 py-1 bg-indigo-900/40 text-indigo-300 rounded text-sm font-mono border border-indigo-800/50">!<%= command.name %></code>
            </td>
            <td class="px-6 py-4 text-sm text-slate-300">
              <%= truncate(command.response, length: 70) %>
            </td>
            <td class="px-6 py-4 text-center">
              <% if command.permission_level == 'moderator' %>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-900/30 text-amber-400 border border-amber-800">
                  <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path><path d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5z"></path></svg>
                  Moderator
                </span>
              <% else %>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-900/30 text-emerald-400 border border-emerald-800">
                  Everyone
                </span>
              <% end %>
            </td>

            <td class="px-6 py-4">
            <div class="text-xs font-mono text-slate-400">
                <div class="flex items-center">
                <span class="text-indigo-500 mr-1">AUTH:</span> <%= command.author || 'System' %>
                </div>
                <div class="flex items-center">
                <span class="text-indigo-500 mr-1">DATE:</span> <%= command.created_at.strftime("%Y-%m-%d") %>
                </div>
            </div>
            </td>


            <td class="px-6 py-4 text-right text-sm space-x-3">
              <%= link_to 'Edit', edit_admin_custom_command_path(command), class: "text-indigo-400 hover:text-indigo-300 font-medium" %>
              <%= link_to 'Delete', admin_custom_command_path(command), 
                          data: { turbo_method: :delete, turbo_confirm: 'Terminate this command?' }, 
                          class: "text-rose-400 hover:text-rose-300 font-medium" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>